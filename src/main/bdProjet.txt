
CREATE TABLE  "EPISODES" 
   (	"TITRESERIE" VARCHAR2(20) NOT NULL ENABLE, 
	"NUMEROSAISON" NUMBER NOT NULL ENABLE, 
	"NUMEROEPISODE" NUMBER NOT NULL ENABLE, 
	"RESUME" VARCHAR2(500) NOT NULL ENABLE, 
	"SCORE" NUMBER, 
	"VUES" NUMBER, 
	 CONSTRAINT "EPISODES_PK" PRIMARY KEY ("NUMEROEPISODE") ENABLE
   ) ;
CREATE TABLE  "SAISONS" 
   (	"TITRESERIE" VARCHAR2(20) NOT NULL ENABLE, 
	"NUMEROSAISON" NUMBER NOT NULL ENABLE, 
	"DATESORTIE" DATE, 
	"RESUME" VARCHAR2(1000), 
	"SCORE" NUMBER, 
	 CONSTRAINT "SAISONS_CK1" CHECK (SCORE <=10) ENABLE, 
	 CONSTRAINT "SAISONS_CK2" CHECK ( SCORE >= 0) ENABLE
   ) ;
CREATE TABLE  "PRODUIT" 
   (	"TITRE" VARCHAR2(30) NOT NULL ENABLE, 
	"REALISATEUR" VARCHAR2(50) NOT NULL ENABLE, 
	"ANNESORTIE" NUMBER(4,0), 
	"LANGUE" VARCHAR2(10), 
	"PAYSORIGINE" VARCHAR2(15), 
	"GENRE" VARCHAR2(10), 
	"SCORE" NUMBER, 
	"TYPEPRODUIT" VARCHAR2(6) NOT NULL ENABLE, 
	"COVER" VARCHAR2(150), 
	"VUES" NUMBER, 
	"DUREEFILM" NUMBER, 
	 CONSTRAINT "PRODUIT_PK" PRIMARY KEY ("TITRE", "REALISATEUR") ENABLE
   ) ;
CREATE TABLE  "PERSONNE" 
   (	"NOMCOMPLET" VARCHAR2(15), 
	"TYPE" VARCHAR2(20), 
	"MAIL" VARCHAR2(150), 
	"MDP" VARCHAR2(15), 
	 CONSTRAINT "PERSONNE_PK" PRIMARY KEY ("MAIL", "MDP") ENABLE
   ) ;
CREATE TABLE  "FAVORIS" 
   (	"NOMCOMPLET" VARCHAR2(20) NOT NULL ENABLE, 
	"NOMPRODUIT" VARCHAR2(30) NOT NULL ENABLE, 
	 CONSTRAINT "FAVORIS_PK" PRIMARY KEY ("NOMCOMPLET", "NOMPRODUIT") ENABLE
   ) ;
CREATE TABLE  "ACTEURFAVORIS"
   (    "NOMCOMPLET" VARCHAR2(20) NOT NULL ENABLE,
    "NOMACTEUR" VARCHAR2(30) NOT NULL ENABLE,
     CONSTRAINT "ACTEURFAVORIS_PK" PRIMARY KEY ("NOMCOMPLET", "NOMACTEUR") ENABLE
   ) ;
CREATE TABLE  "GENREFAVORIS"
   (    "NOMCOMPLET" VARCHAR2(20) NOT NULL ENABLE,
    "NOMGENRE" VARCHAR2(30) NOT NULL ENABLE,
     CONSTRAINT "GENREFAVORIS_PK" PRIMARY KEY ("NOMCOMPLET", "NOMGENRE") ENABLE
   ) ;
   CREATE TABLE  "AVISPRODUIT"
      (	"NOMUTILISATEUR" VARCHAR2(50) NOT NULL ENABLE,
   	"NOMPRODUIT" VARCHAR2(50) NOT NULL ENABLE,
   	"AVIS" VARCHAR2(500),
   	"TYPE" VARCHAR2(15),
   	 CONSTRAINT "AVISPRODUITS_PK" PRIMARY KEY ("NOMUTILISATEUR", "NOMPRODUIT") ENABLE
      ) ;
      CREATE TABLE  "AVISEPISODE"
         (	"NOMUTILISATEUR" VARCHAR2(50) NOT NULL ENABLE,
      	"NOMPRODUIT" VARCHAR2(50) NOT NULL ENABLE,
      	"AVIS" VARCHAR2(500),
      	"NUMEROSAISON" NUMBER NOT NULL ENABLE,
      	"NUMEROEPISODE" NUMBER NOT NULL ENABLE,
      	 CONSTRAINT "AVISEPISODE_PK" PRIMARY KEY ("NOMUTILISATEUR", "NOMPRODUIT") ENABLE
         ) ;
         CREATE TABLE  "AVISSAISON"
            (	"NOMUTILISATEUR" VARCHAR2(50) NOT NULL ENABLE,
         	"NOMPRODUIT" VARCHAR2(50) NOT NULL ENABLE,
         	"AVIS" VARCHAR2(500),
         	"NUMEROSAISON" NUMBER NOT NULL ENABLE,
         	 CONSTRAINT "AVISSAISON_PK" PRIMARY KEY ("NOMUTILISATEUR", "NOMPRODUIT") ENABLE
            ) ;
         CREATE TABLE  "PARTICIPATION"
            (	"NOMACTEUR" VARCHAR2(40) NOT NULL ENABLE,
         	"NOMPRODUIT" VARCHAR2(40) NOT NULL ENABLE,
         	"ROLE" VARCHAR2(10),
         	 CONSTRAINT "PARTICIPATION_PK" PRIMARY KEY ("NOMACTEUR", "NOMPRODUIT") ENABLE,
         	 CONSTRAINT "PARTICIPATION_CK1" CHECK (ROLE='PRIMAIRE' OR ROLE='SECONDAIRE') ENABLE
            ) ;


            CREATE TABLE  "NOTIF"
               (	"ID_NOTIFICATION" NUMBER,
                "UTILISATEUR" VARCHAR2(50) NOT NULL ENABLE,
                "MESSAGE" VARCHAR2(200) NOT NULL ENABLE,
                "DATE_NOTIFICATION" DATE,
                 PRIMARY KEY ("ID_NOTIFICATION") ENABLE
               ) ;


            CREATE SEQUENCE notif_seq;

            CREATE OR REPLACE TRIGGER notif_trigger
               BEFORE INSERT ON Notif
               FOR EACH ROW
            BEGIN
               :NEW.id_notification := notif_seq.NEXTVAL;
            END;

